---

import i18next from 'i18next';

import Page from './Page.astro';
import Head from '../components/Head.astro';

import translation from '../pages/en/translation.json';

i18next.init({
  lng: 'en',
  debug: false,
  resources: {
    en: { translation }
  }
});

const { t } = i18next;
const { page } = Astro.props;

---


<html lang="en">
	<head>
    <Head title={t('siteTitle')} type="website" description={t('siteDescription')} />
    <script data-page={page}>
      const { page } = document.currentScript.dataset;
      let language = localStorage.getItem('lang');
      if (!language) {
        /*if (/^pt\b/.test(navigator.language))*/
          /*language = 'pt';*/
        /*else*/
          language = 'en';
      }
      window.location.pathname = `/blog/${language}${page}`;
    </script>
  </head>
</html>
